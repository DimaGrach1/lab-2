# Лабораторная работа 2

## Скрипт

Сначала я посмотрел предложенные нам лекции. После, с помощью дополнительных источников, я написал следующий скрипт: 

```bash
#!/bin/bash

Validation() {
old_ifs=$IFS
IFS="."
error_message="\nНеверный формат ввода. IPv4-адрес имеет вид X.X.X.X, где X - целое число от 0 до 255 включительно\n"
pattern="^([0-9]{1,3}[\.]){3}[0-9]{1,3}"
res=""
echo -n "Введите IPv4-адрес в десятичном формате: "
read address

if [[ $address =~ $pattern ]]; then
 for i in $address; do
 if [[ $i -ge 0 ]] && [[ $i -le 255 ]]; then
  t=$((echo "obase=2; $i" | bc))
   while [[ ${#t} -lt 8 ]]
   do
    t="0$t"
   done
  if [[ ${#res} -le 26 ]]; then
   res+="$t."
  else
   res+=$t
  fi
 else
  IFS=$old_ifs
  echo -e $error_message
  break
  Transform_ip_address
  
 fi
 done
 if [[ ${#res} -eq 35 ]]; then
  IFS=$old_ifs
  echo $res
 else
  Transform_ip_address
 fi
else
 IFS=$old_ifs
 echo -e $error_message
 Transform_ip_address
fi
}


Transform_ip_address
```

Весь скрипт я решил реализовывать с помощью рекурсивной функции ```Transform_ip_address```. Сначала мы запоминаем старое значение переменной ```IFS``` и присваиваем ей новое значение, чтобы разделить введенную пользователем строку по точкам. Далее я прописал сообщение, которое будет выводится пользователю в случае, если его строка не соответсвует формату IPv-4 адреса и регулярное выражение - паттерн IPv-4 адреса. Инициализировал переменную ```res```, в которой будет храниться результат выполнения функции. После этого я предлагаю пользователю ввести IPv-4 адрес в десятичном формате. С помощью условий проверяю валидность введенного IP адреса. Внутри цикла ```for``` поочередно преобразую числа из десятичной системы исчисления в двоичную, добавляю незначащие нули и собираю переменную результата.

## Тесты
1) Вводим пример из задания ```192.168.10.1```, на выходе получаем нужное значение ```11000000.10101000.00001010.00000001```.

![image](https://github.com/user-attachments/assets/921c3a01-03d6-43fd-be76-44aaec6d215e)


2) Если мы введем совсем неподходящую по формату строку, на экран пользователя будет выведено сообщение об ошибке, и ему будет предложено ввести IPv-4 адрес еще раз.

![image](https://github.com/user-attachments/assets/2772e987-48d2-4b82-bff1-ff2112234f11)


3) Если мы введем подходящую по формату строку, но числа не будут входить в множество целых чисел от 0 до 255 включительно, то на экран пользователя, опять же, будет выведено сообщение об ошибке, и, опять же, ему будет предложено ввести IPv-4 адрес еще раз.

![image](https://github.com/user-attachments/assets/c9b32472-1c72-4683-9c43-a129bde32c40)
